<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cozy Platformer</title>
<style>
    body {
        margin: 0;
        background: #cfe8e4;
        overflow: hidden;
        touch-action: none;
    }
    canvas {
        display: block;
        background: linear-gradient(#cfe8e4, #f7f3e9);
    }

    /* Mobile controls */
    #controls {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 20px;
    }
    .btn {
        width: 70px;
        height: 70px;
        background: #ffffffaa;
        backdrop-filter: blur(5px);
        border-radius: 50%;
        border: 2px solid #ffffff55;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        user-select: none;
    }
</style>
</head>
<body>

<canvas id="game" width="900" height="500"></canvas>

<div id="controls">
    <div class="btn" id="left">⟵</div>
    <div class="btn" id="jump">⬆</div>
    <div class="btn" id="right">⟶</div>
</div>

<audio id="jumpSound" src="https://cdn.pixabay.com/download/audio/2021/08/09/audio_7f8d0cb0fd.mp3?filename=jump-110270.mp3"></audio>

<script>
// Canvas
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Player setup
const player = {
    x: 100,
    y: 350,
    w: 40,
    h: 40,
    dx: 0,
    dy: 0,
    speed: 4,
    jumping: false
};

const gravity = 0.5;

// Platforms
const platforms = [
    {x: 0,   y: 450, w: 900, h: 50},
    {x: 150, y: 350, w: 150, h: 20},
    {x: 350, y: 300, w: 150, h: 20},
    {x: 550, y: 330, w: 150, h: 20}
];

// Audio
const jumpSound = document.getElementById("jumpSound");

// Keys
let keys = { left: false, right: false, up: false };

// Desktop controls
document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") keys.left = true;
    if (e.key === "ArrowRight") keys.right = true;
    if (e.key === "ArrowUp") keys.up = true;
});
document.addEventListener("keyup", e => {
    if (e.key === "ArrowLeft") keys.left = false;
    if (e.key === "ArrowRight") keys.right = false;
    if (e.key === "ArrowUp") keys.up = false;
});

// Mobile controls
function bindTouch(btn, key) {
    btn.ontouchstart = () => keys[key] = true;
    btn.ontouchend = () => keys[key] = false;
}
bindTouch(document.getElementById("left"), "left");
bindTouch(document.getElementById("right"), "right");
bindTouch(document.getElementById("jump"), "up");

// Game loop
function update() {
    player.dx = 0;

    // Move left/right
    if (keys.left) player.dx = -player.speed;
    if (keys.right) player.dx = player.speed;

    // Jumping
    if (keys.up && !player.jumping) {
        player.dy = -10;
        player.jumping = true;
        jumpSound.currentTime = 0;
        jumpSound.play();
    }

    player.dy += gravity;

    // Apply movement
    player.x += player.dx;
    player.y += player.dy;

    // Platform collisions
    for (let p of platforms) {
        if (player.x < p.x + p.w &&
            player.x + player.w > p.x &&
            player.y + player.h > p.y &&
            player.y + player.h < p.y + p.h + player.dy) {

            player.y = p.y - player.h;
            player.dy = 0;
            player.jumping = false;
        }
    }

    draw();
    requestAnimationFrame(update);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Platforms
    ctx.fillStyle = "#a7c7a9";
    platforms.forEach(p => ctx.fillRect(p.x, p.y, p.w, p.h));

    // Player
    ctx.fillStyle = "#ffbfbf";
    ctx.fillRect(player.x, player.y, player.w, player.h);
}

// Start
update();
</script>

</body>
</html>
